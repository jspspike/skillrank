<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script>
      $(function () {
        $('#start-session').click(function () {
          var players=$('#player-select').map(function(){ // ["city1","c2","s1","s5"]
            return $(this).val();
          });
          $.ajax({
              url: '/createlobby',
              data: $('form').serialize(),
              type: 'PUT',
              data: JSON.stringify({
                "players": players,
              }),
          });
          location.reload();
        }); 
      });
    </script>
    <title>{title}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  </head>
  <body>
  <div class="container-md">
    {{ if session }} 
    {{ else }}
    <select class="form-select" multiple aria-label="size 20 multiple select example" id="player-select">
      {{ for player in players }}
      <option value="{player.id}">{player.name}</option>
      {{ endfor }}
    </select>
    <input type="text" class="form-control" placeholder="Number of Games" aria-label="Games" aria-describedby="num_games" id="num-games-select">
    <input type="text" class="form-control" placeholder="Players per Team" aria-label="Players" aria-describedby="players_per_team" id="players-per-select">
    <input type="text" class="form-control" placeholder="Matchmaking Stability" aria-label="Stability" aria-describedby="stability" id="stability-select">
    <button type="button" class="btn btn-primary" id="start-session">Start</button>
    {{ endif }}
  </div>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
  </body>
</html>
